{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import TextField from\"@mui/material/TextField\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[studentNumber,setStudentNumber]=useState(\"\");const[password,setPassword]=useState(\"\");const[connected,setConnected]=useState(false);const[responseStudent,setResponseStudent]=useState(\"\");const[chatHistory,setChatHistory]=useState([[]]);const[currentChatHistory,setCurrentChatHistory]=useState({conversation:[],conversationIndex:-1});const chatHistoryRef=useRef(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Opcional: HTML para un .tex completo\nconst[latexHTML,setLatexHTML]=useState(\"\");const handleError=msg=>setError(msg);const handleClose=()=>setError(null);function ErrorModal(_ref){let{error,onClose}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});}const handleLogin=async e=>{e.preventDefault();try{const res=await fetch(\"/authConf.json\");const authData=await res.json();const userExists=authData.users.some(u=>u.studentNumber===studentNumber&&u.password===password);if(userExists){setConnected(true);}else{console.log(\"Usuario/contraseña incorrectos.\");}}catch(err){console.error(\"Error authConf.json:\",err);}};const fetchChatHistory=async()=>{try{const res=await fetch(\"History.json\");const data=await res.json();if(data[0].length===0){setChatHistory([]);setCurrentChatHistory({conversationIndex:0,conversation:[]});}else{setChatHistory(data);setCurrentChatHistory({conversationIndex:data.length-1,conversation:data[data.length-1]});}}catch(err){console.error(\"Error fetching chat:\",err);}};const inputHandler=e=>{setResponseStudent(e.target.value);};const handleSubmit=()=>{setLoading(true);const jsonData={responseStudent,history:currentChatHistory.conversation};fetch(\"/api/query\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(jsonData)}).then(r=>r.json()).then(data=>{setLoading(false);if(data.message.responseChatbot===\"reinit\"){fetchChatHistory();}else{// Actualizar currentChatHistory\nsetCurrentChatHistory(prev=>({conversation:[...(prev.conversation||[]),{id:data.message.id,responseStudent,responseChatbot:data.message.responseChatbot}],conversationIndex:prev.conversationIndex}));// Actualizar chatHistory global\nif(!currentChatHistory.conversation||currentChatHistory.conversation.length===0){setChatHistory([...chatHistory,[{id:data.message.id,responseStudent,responseChatbot:data.message.responseChatbot}]]);}else{const updated=chatHistory.map((conv,idx)=>{if(idx===currentChatHistory.conversationIndex){return[...currentChatHistory.conversation,{id:data.message.id,responseStudent,responseChatbot:data.message.responseChatbot}];}return conv;});setChatHistory(updated);}setResponseStudent(\"\");}}).catch(err=>{console.error(\"Error query backend:\",err);handleError(\"Ocurrió un error: revise su pregunta.\");setLoading(false);});};const isImageUrl=url=>{return /\\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(url);};// Efectos\nuseEffect(()=>{if(chatHistoryRef.current){chatHistoryRef.current.scrollTop=chatHistoryRef.current.scrollHeight;}},[chatHistory]);useEffect(()=>{fetchChatHistory();},[]);// Carga opcional del .tex -> .html si usas /api/convert_latex\nuseEffect(()=>{fetch(\"/api/convert_latex\").then(r=>r.json()).then(data=>{setLatexHTML(data.html);// Forzar re-render de MathJax si lo usas\nif(window.MathJax&&window.MathJax.typeset){window.MathJax.typeset();}}).catch(err=>console.error(\"Error fetch /api/convert_latex:\",err));},[]);// Re-ejecutar MathJax en cada actualización de chat\nuseEffect(()=>{if(window.MathJax&&window.MathJax.typeset){window.MathJax.typeset();}},[currentChatHistory]);if(!connected){return/*#__PURE__*/_jsx(\"div\",{className:\"container-form\",children:/*#__PURE__*/_jsx(\"form\",{id:\"msform\",children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Por favor, autent\\xEDquese\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:studentNumber,onChange:e=>setStudentNumber(e.target.value),placeholder:\"N\\xFAmero estudiante\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Contrase\\xF1a\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"saveHistory-button\",onClick:handleLogin,children:\"Entrar\"})]})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Robot PP\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border d-table w-100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"latex-container\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Universidad de Los Andes\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"history-panel right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"history-scroll\",ref:chatHistoryRef,children:/*#__PURE__*/_jsx(\"ul\",{children:currentChatHistory.conversation.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"messages\",children:[item.responseStudent&&/*#__PURE__*/_jsx(\"p\",{className:\"whatsapp-bubble send\",children:item.responseStudent}),item.responseChatbot&&(isImageUrl(item.responseChatbot)?/*#__PURE__*/_jsx(\"img\",{src:item.responseChatbot,alt:\"Chatbot\",className:\"chatbot-image\"}):/*#__PURE__*/_jsx(\"p\",{className:\"whatsapp-bubble received\",dangerouslySetInnerHTML:{__html:item.responseChatbot}}))]},idx))})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",value:responseStudent,onChange:inputHandler,onKeyPress:e=>{if(e.key===\"Enter\"){handleSubmit();}},variant:\"outlined\",fullWidth:true,label:\"Respuesta\"}),/*#__PURE__*/_jsx(\"button\",{className:\"search-button\",onClick:handleSubmit,disabled:loading,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}):\"Enviar\"}),error&&/*#__PURE__*/_jsx(ErrorModal,{error:error,onClose:handleClose})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","TextField","jsx","_jsx","jsxs","_jsxs","App","studentNumber","setStudentNumber","password","setPassword","connected","setConnected","responseStudent","setResponseStudent","chatHistory","setChatHistory","currentChatHistory","setCurrentChatHistory","conversation","conversationIndex","chatHistoryRef","loading","setLoading","error","setError","latexHTML","setLatexHTML","handleError","msg","handleClose","ErrorModal","_ref","onClose","className","children","onClick","handleLogin","e","preventDefault","res","fetch","authData","json","userExists","users","some","u","console","log","err","fetchChatHistory","data","length","inputHandler","target","value","handleSubmit","jsonData","history","method","headers","body","JSON","stringify","then","r","message","responseChatbot","prev","id","updated","map","conv","idx","catch","isImageUrl","url","test","current","scrollTop","scrollHeight","html","window","MathJax","typeset","type","onChange","placeholder","ref","item","src","alt","dangerouslySetInnerHTML","__html","onKeyPress","key","variant","fullWidth","label","disabled"],"sources":["/Users/camilojose/Desktop/2025/Proyecto PPIA/App PPIA/PPIA_2025/Front_React_New/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport TextField from \"@mui/material/TextField\";\nimport \"./App.css\";\n\nfunction App() {\n  const [studentNumber, setStudentNumber] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [connected, setConnected] = useState(false);\n\n  const [responseStudent, setResponseStudent] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([[]]);\n  const [currentChatHistory, setCurrentChatHistory] = useState({\n    conversation: [],\n    conversationIndex: -1,\n  });\n\n  const chatHistoryRef = useRef(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Opcional: HTML para un .tex completo\n  const [latexHTML, setLatexHTML] = useState(\"\");\n\n  const handleError = (msg) => setError(msg);\n  const handleClose = () => setError(null);\n\n  function ErrorModal({ error, onClose }) {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={onClose}>\n            &times;\n          </span>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await fetch(\"/authConf.json\");\n      const authData = await res.json();\n      const userExists = authData.users.some(\n        (u) => u.studentNumber === studentNumber && u.password === password\n      );\n      if (userExists) {\n        setConnected(true);\n      } else {\n        console.log(\"Usuario/contraseña incorrectos.\");\n      }\n    } catch (err) {\n      console.error(\"Error authConf.json:\", err);\n    }\n  };\n\n  const fetchChatHistory = async () => {\n    try {\n      const res = await fetch(\"History.json\");\n      const data = await res.json();\n      if (data[0].length === 0) {\n        setChatHistory([]);\n        setCurrentChatHistory({ conversationIndex: 0, conversation: [] });\n      } else {\n        setChatHistory(data);\n        setCurrentChatHistory({\n          conversationIndex: data.length - 1,\n          conversation: data[data.length - 1],\n        });\n      }\n    } catch (err) {\n      console.error(\"Error fetching chat:\", err);\n    }\n  };\n\n  const inputHandler = (e) => {\n    setResponseStudent(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    setLoading(true);\n    const jsonData = {\n      responseStudent,\n      history: currentChatHistory.conversation,\n    };\n\n    fetch(\"/api/query\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(jsonData),\n    })\n      .then((r) => r.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.message.responseChatbot === \"reinit\") {\n          fetchChatHistory();\n        } else {\n          // Actualizar currentChatHistory\n          setCurrentChatHistory((prev) => ({\n            conversation: [\n              ...(prev.conversation || []),\n              {\n                id: data.message.id,\n                responseStudent,\n                responseChatbot: data.message.responseChatbot,\n              },\n            ],\n            conversationIndex: prev.conversationIndex,\n          }));\n\n          // Actualizar chatHistory global\n          if (!currentChatHistory.conversation || currentChatHistory.conversation.length === 0) {\n            setChatHistory([\n              ...chatHistory,\n              [\n                {\n                  id: data.message.id,\n                  responseStudent,\n                  responseChatbot: data.message.responseChatbot,\n                },\n              ],\n            ]);\n          } else {\n            const updated = chatHistory.map((conv, idx) => {\n              if (idx === currentChatHistory.conversationIndex) {\n                return [\n                  ...currentChatHistory.conversation,\n                  {\n                    id: data.message.id,\n                    responseStudent,\n                    responseChatbot: data.message.responseChatbot,\n                  },\n                ];\n              }\n              return conv;\n            });\n            setChatHistory(updated);\n          }\n          setResponseStudent(\"\");\n        }\n      })\n      .catch((err) => {\n        console.error(\"Error query backend:\", err);\n        handleError(\"Ocurrió un error: revise su pregunta.\");\n        setLoading(false);\n      });\n  };\n\n  const isImageUrl = (url) => {\n    return /\\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(url);\n  };\n\n  // Efectos\n  useEffect(() => {\n    if (chatHistoryRef.current) {\n      chatHistoryRef.current.scrollTop = chatHistoryRef.current.scrollHeight;\n    }\n  }, [chatHistory]);\n\n  useEffect(() => {\n    fetchChatHistory();\n  }, []);\n\n  // Carga opcional del .tex -> .html si usas /api/convert_latex\n  useEffect(() => {\n    fetch(\"/api/convert_latex\")\n      .then((r) => r.json())\n      .then((data) => {\n        setLatexHTML(data.html);\n        // Forzar re-render de MathJax si lo usas\n        if (window.MathJax && window.MathJax.typeset) {\n          window.MathJax.typeset();\n        }\n      })\n      .catch((err) => console.error(\"Error fetch /api/convert_latex:\", err));\n  }, []);\n\n  // Re-ejecutar MathJax en cada actualización de chat\n  useEffect(() => {\n    if (window.MathJax && window.MathJax.typeset) {\n      window.MathJax.typeset();\n    }\n  }, [currentChatHistory]);\n\n  if (!connected) {\n    return (\n      <div className=\"container-form\">\n        <form id=\"msform\">\n          <fieldset>\n            <h2>Por favor, autentíquese</h2>\n            <p>\n              <input\n                type=\"text\"\n                value={studentNumber}\n                onChange={(e) => setStudentNumber(e.target.value)}\n                placeholder=\"Número estudiante\"\n              />\n            </p>\n            <p>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"Contraseña\"\n              />\n            </p>\n            <button className=\"saveHistory-button\" onClick={handleLogin}>\n              Entrar\n            </button>\n          </fieldset>\n        </form>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"main\">\n      <h1>Robot PP</h1>\n      <div className=\"border d-table w-100\"></div>\n\n      {/* Ejemplo: mostramos el HTML de Preguntas.tex convertido */}\n      <div className=\"latex-container\">\n        <h2>Universidad de Los Andes</h2>\n      </div>\n\n      <div className=\"container\">\n        <div className=\"history-panel right\">\n          <div className=\"history-scroll\" ref={chatHistoryRef}>\n            <ul>\n              {currentChatHistory.conversation.map((item, idx) => (\n                <li className=\"messages\" key={idx}>\n                  {item.responseStudent && (\n                    <p className=\"whatsapp-bubble send\">{item.responseStudent}</p>\n                  )}\n                  {item.responseChatbot && (\n                    isImageUrl(item.responseChatbot) ? (\n                      <img\n                        src={item.responseChatbot}\n                        alt=\"Chatbot\"\n                        className=\"chatbot-image\"\n                      />\n                    ) : (\n                      <p\n                        className=\"whatsapp-bubble received\"\n                        dangerouslySetInnerHTML={{ __html: item.responseChatbot }}\n                      />\n                    )\n                  )}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"search\">\n        <TextField\n          id=\"outlined-basic\"\n          value={responseStudent}\n          onChange={inputHandler}\n          onKeyPress={(e) => {\n            if (e.key === \"Enter\") {\n              handleSubmit();\n            }\n          }}\n          variant=\"outlined\"\n          fullWidth\n          label=\"Respuesta\"\n        />\n        <button className=\"search-button\" onClick={handleSubmit} disabled={loading}>\n          {loading ? <div className=\"loading-spinner\"></div> : \"Enviar\"}\n        </button>\n        {error && <ErrorModal error={error} onClose={handleClose} />}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}